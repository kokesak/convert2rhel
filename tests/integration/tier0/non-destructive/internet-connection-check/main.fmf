summary: |
    Internet connection checks
description: |
    Verify that internet connection check works as expected
    trying to reach 'https://static.redhat.com/test/rhel-networkmanager.txt'

tier: 0

tag+:
    - internet-connection-check

/available_connection:
    summary+: |
        Connection is available
    description+: |
        Verify that convert2rhel checks for internet connection
        and notifies user, that the connection seems to be available.
    tag+:
        - available-connection
    test: |
        pytest -svv -m test_available_connection

/failed_internet_connection_check:
    summary+: |
        Full analysis when connection check failed on pre registered system
    description+: |
        Make sure that the connection check fails but the
        whole analysis finishes without issue.
    adjust+:
        - environment+:
            C2R_TESTS_SUBMAN_CLEANUP: 1
        - enabled: false
          when: distro == oracle
          because: |
            There is no subscription-manager package in Oracle Linux repositories
            and no documentation is provided - https://issues.redhat.com/browse/RHELC-1485.
    tag+:
        - internet-check-fail
        - sanity
    test: |
        pytest -svv -m test_failed_internet_connection_check
